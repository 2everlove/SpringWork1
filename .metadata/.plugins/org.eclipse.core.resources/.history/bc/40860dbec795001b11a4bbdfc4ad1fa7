package jmp.spring.ex01;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;

import org.junit.Test;

import lombok.extern.log4j.Log4j;

@Log4j
public class OjdbcTest {
	private static String url = "jdbc:oracle:thin:@localhost:1521:xe";
	private static String username = "spring";
	private static String password = "spring";
	private static Connection conn = null;
	
	public void testConn() {
		for(int i=0; i<100; i++) {
			try {
				conn = DriverManager.getConnection(url, username, password);
				
			} catch (SQLException e) {
				e.printStackTrace();
			} finally {
				try {
					if(conn.isClosed()) {
						conn.close();				
					}
				} catch (SQLException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
			}
		}
		
	}
	
	
	
	
	
	
	
	
	
	// 오류처리및 소스 정리를 해봅시다.
	@Test
	public void testConnection(){
		
	Connection con = null;

	// 시간을 찍기위한 변수
		long start = System.currentTimeMillis(); 

	// 클래스 로드
		try {
			Class.forName("oracle.jdbc.driver.OracleDriver");
			con = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:xe", "spring","spring");
			log.info(con);
			
			con.close();
			
			long end = System.currentTimeMillis();
			System.out.println((end-start)/1000+"s");
		} catch (Exception e) {
			e.getMessage();
		}
		
		
	}

}
